# Feature definition

This tables presents the definition of all the stock features provided with musiF.

The first column are Python Regular Expression that match the relevant columns of the
final DataFrame.

| **Column RegEx**                   | **Explanation**                                                                                                                                                                                                                           | **Kind of values**                                                                                                         |
|------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
| `Key`                              | Key in which the piece is written. The relation with annotated key signature may not be straightforward                                                                                                                                   | A-B (upper or lowercase) + "b" or "#" (optional)                                                                           |
| `KeySignature`                     | Key signature of the piece according to modern convention; might not correspond to the one annotated on the score                                                                                                                         | 1-n "b", "n", or "s"                                                                                                       |
| `KeySignatureType`                 | Typer of signature (flats, naturals, or sharps) according to modern convention                                                                                                                                                            | "bb", "nn", or "ss"                                                                                                        |
| `Instrumentation`                  | Instruments on the score, using Italian abbreviation; 2 parts of the same instrument are simplified as 1 such instrument                                                                                                                  | In por courpus, at least "vn,va,bs"                                                                                        |
| `Scoring`                          | List of parts on the score, including voices, using Italian abbreviation; 2 parts of the same instrument are not simplified; various parts of the same instruemnt/voice are indicated by Roman numerals attached ot the part abbreviation |                                                                                                                            |
| `Voices`                           | Type(s) of voices included on the score, ordered from high to low (when relevant)                                                                                                                                                         | 1 or + from "sop", "alt", "ten", "bass". The number of items should correspond to the number of characters, and viceversa. |
| `Measures`                         | No. of measures of the piece                                                                                                                                                                                                              | 0-n                                                                                                                        |
| `Mode`                             | Mode of the $Key of the piece                                                                                                                                                                                                             | "major" or "minor"                                                                                                         |
| `NumericTempo`                     | Numeric tempo of the piece, as defined by the engravers and correctors                                                                                                                                                                    | 0-n; might be blank in arias with balnk $Tempo                                                                             |
| `Tempo`                            | Verbal annotation for the tempo, as defined by the composer                                                                                                                                                                               | `.+` words; might be blank                                                                                                 |
| `TempoGrouped1`                    | Classification of $Tempo according to the main term in the verbal annotation                                                                                                                                                              | string; blank when $Tempo is blank                                                                                         |
| `TempoGrouped2`                    | Classification of $Tempo in "Slow", "Moderate", or "Fast"                                                                                                                                                                                 | string; blank when $Tempo is blank                                                                                         |
| `TimeSignature`                    | Time signature(s) of the piece                                                                                                                                                                                                            | never blank                                                                                                                |
| `TimeSignatureGrouped`             | Type of meter of the piece, classified in simple duple, simple triple, compound duple, or compound triple                                                                                                                                 | never blank; the number should correspond to the no. Of $TimeSignature                                                     |
| `.+_Density`                       | Density, calculated as no. of notes in the score, family, sound or part / (`Measures` * no. of parts)                                                                                                                                     |                                                                                                                            |
| `.+_SoundingDensity`               | Sounding Density, calculated as the mean of no. of notes of each part / `Measures` in which the part is sounding                                                                                                                          |                                                                                                                            |
| `Harmony_Chord_.+_Count`           | No. of `.+` harmonic annotations in the aria, as included in the "Chord" column of the harmonic data                                                                                                                                      | 0-n; never blank                                                                                                           |
| `Harmony_Chord_.+_Per`             | % of `.+` harmonic annotations in the aria, as included in the "Chord" column of the harmonic data                                                                                                                                        | 0-1; the sum should be 1                                                                                                   |
| `Harmony_Chord_types_.+`           | % of harmonic annotations of the [major trad, dim, aug., etc.] type in the aria, as included in the "ChordType" column of the harmonic data and completed by our function                                                                 | 0-1; the sum should be 1                                                                                                   |
| `Harmony_Chords_Grouping_1.+_Count`| No. of chords performig the [T, SD, D, etc.] function in the aria, as determined by the Ruiemannian classification function; it distinguishes between minor and major functions                                                           | 0-n; never blank                                                                                                           |
| `Harmony_Chords_Grouping_1.+_Per`  | % of chords performig the [T, SD, D, etc.] function in the aria, as determined by the Riemannian classification function; it distinguishes between minor and major functions                                                              | 0-1; the sum should be 1                                                                                                   |
| `Harmony_Chords_Grouping_2.+_Count`| No. of chords performig the [T, SD, D, etc.] function in the aria, as determined by the Riemannian classification function; it does not distinguish between minor and major                                                               | 0-n; never blank                                                                                                           |
| `Harmony_Chords_Grouping_2.+_Per`  | % of chords performig the [T, SD, D, etc.] function in the aria, as determined by the classification function; it does not distinguish between minor and major                                                                            | 0-1; the sum should be 1                                                                                                   |
| `Harmony_HarmonicRhythm`           | Harmonic rhythm of the piece, calculated as no. of harmonic annotations / `Measures`                                                                                                                                                      | > 0                                                                                                                        |
| `Harmony_HarmonicRhythmBeats`      | Harmonic rhythm of the piece by beats, calculated as no. of harmonic annotations / `Measures` * No. of beats per measure (depends on $TimeSignature; we use a function)                                                                   | > 0                                                                                                                        |
| `Harmony_Key_.+_PercentageMeasures`| % of measures that are in a given key, extracted from the LocalKey column in the harmonic df                                                                                                                                              | 0-1; the sum should be 1                                                                                                   |
| `Harmony_Key_Modulatory_(b\|#)?\d` | % of sections that are in a given key, extracted from the LocalKey column in the harmonic df                                                                                                                                              | 0-1; the sum should be 1                                                                                                   |
| `Harmony_Key_Modulatory_.+`        | % of sections that are in a given key performing the [T, SD, D, etc.] harmonic function, as determined by grouping `Harmony_Key_Modulatory_[Roman numeral]` according to the Riemannian function                                          | 0-1                                                                                                                        |
| `Harmony_Numerals_.+_Count`        | No. of `.+` harmonic annotations in the aria, as included in the "Numeral" column of the harmonic data                                                                                                                                    | 0-n; never blank                                                                                                           |
| `Harmony_Numerals_.+_Per`          | % of `.+` harmonic annotations in the aria, as included in the "Numeral" column of the harmonic data                                                                                                                                      | 0-1; the sum should be 1                                                                                                   |
| `.+_IntervallicKurtosis`           | Kurtosis of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score                                                                                                                            | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_IntervallicStd`                | Std of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score                                                                                                                                 | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_IntervallicMean`               | Mean of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score                                                                                                                                | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_IntervallicSkewness`           | Skewness of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score                                                                                                                            | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_IntervallicTrimmDiff`          | `.+_TrimmedIntervallicMean` - `.+_IntervalicMean`                                                                                                                                                                                         | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_IntervallicTrimmRatio`         | `.+_TrimmedIntervallicMean` / `.+_IntervalicMean`                                                                                                                                                                                         | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicKurtosis`   | Kurtosis of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score                                                                                                                                          | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicMean`       | Mean of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score                                                                                                                                              | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicSkewness`   | Skewness of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score                                                                                                                                          | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicStd`        | Std of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score                                                                                                                                               | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicTrimmDiff`  | `.+_AbsoluteTrimmedIntervallicMean` - `.+_AbsoluteIntervalicMean`                                                                                                                                                                         | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_AbsoluteIntervallicTrimmRatio` | `.+_AbsoluteTrimmedIntervallicMean` / `.+_AbsoluteIntervalicMean`                                                                                                                                                                         | >0 or blank; never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                   |
| `.+_TrimmedAbsoluteIntervallicMean`| Mean of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score, discarding 10% of the most extreme data                                                                                                     | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_TrimmedAbsoluteIntervallicStd` | Std of the absolute interval sizes (in no. of semitones) in a given part/sound/family/score, discarding 10% of the most extreme data                                                                                                      | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_TrimmedIntervallicMean`        | Mean of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score, discarding 10% of the most extreme data                                                                                       | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_TrimmedIntervallicStd`         | Std of the interval sizes (in no. of semitones, positive and negative) in a given part/sound/family/score, discarding 10% of the most extreme data                                                                                        | Never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`                                                                |
| `.+_Acc_avg_abs`                   | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Asc_avg`                       | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Asc_prp`                       | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Dsc_avg`                       | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Dsc_prp`                       | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Spe_avg_abs`                   | TODO                                                                                                                                                                                                                                      |                                                                                                                            |
| `.+_Ambitus`                       | Ambitus of the part/sound/family/score, in number of semitones                                                                                                                                                                            | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_AscendingIntervallicMean`      | Mean of the sizes of the ascending intervals (in no. of semitones) in a given part/sound/family/score                                                                                                                                     | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_AscendingIntervallicStd`       | Std of the sizes of the ascending intervals (in no. of semitones) in a given part/sound/family/score                                                                                                                                      | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_DescendingIntervallicMean`     | Mean of the sizes of the descending intervals (in no. of semitones) in a given part/sound/family/score                                                                                                                                    | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, <0                                            |
| `.+_DescendingIntervallicStd`      | Std of the sizes of the descending intervals (in no. of semitones) in a given part/sound/family/score                                                                                                                                     | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_AscendingIntervals_Count`      | No. of ascending intervals in a given part/sound/family/score                                                                                                                                                                             | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_AscendingIntervals_Per`        | `.+_AscendingIntervals_Count` / no. of intervals in a given part/sound/family/score                                                                                                                                                       | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, 0-1                                           |
| `.+_DescendingIntervals_Count`     | No. of descending intervals in a given part/sound/family/score                                                                                                                                                                            | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, >0                                            |
| `.+_DescendingIntervals_Per`       | `.+_DescendingIntervals_Count` / no. of intervals in a given part/sound/family/score                                                                                                                                                      | never blank for `Score.+`, `Family_Voice.+`, `Family_str.+`, when not blank, 0-1                                           |
| `.+_AverageDuration`               | Average duration of the note values in a given part/sound/family/score                                                                                                                                                                    | when not blank, >0                                                                                                         |
| `.+Degree(b+\|#\|x)?\d_Count`      | No. of notes in a given part/sound/family/score corresponding to the `.+` scale degree in relation to the main key of the piece; removed after postprocessing                                                                             | when not blank, 0-n                                                                                                        |
| `.+Degree(b+\|#\|x)?\d_Per`        | `.+_Degree[Arabic numeral]_Count` / No. of notes of the given part/sound/family/score                                                                                                                                                     | when not blank, 0-1; the sum in each aria = 1                                                                              |
| `.+Degree(b+\|#\|x)?\d_Count`      | No. of notes in a given part/sound/family/score corresponding to the `.+` scale degree in relation to the local key of the passage in which the note is inserted; removed after postprocessing                                            | when not blank, 0-n                                                                                                        |
| `.+Degree(b+\|#\|x)?\d_Per`        | `.+_Degree[Arabic numeral]_Count_relative` / No. of notes of the given part/sound/family/score                                                                                                                                            | when not blank, 0-1; the sum in each aria = 1                                                                              |
| `.+_Degree_.+_Count`               | No. of notes in a given part/sound/family/score corresponding to [asc, desc, nat, dasc, ddesc] scale degrees in relation to the main key of the piece; removed after postprocessing                                                       | when not blank, 0-n                                                                                                        |
| `.+_Degree_.+_Per`                 | `.+_Degree_[string]_Count` / No. of notes of the given part/sound/family/score                                                                                                                                                            | when not blank, 0-1; the sum in each aria = 1                                                                              |
| `.+_Degree_.+_Count_relative`      | No. of notes in a given part/sound/family/score corresponding to `.+` scale degrees in relation to the local key of the piece; removed after postprocessing                                                                               | when not blank, 0-n                                                                                                        |
| `.+_Degree_.+_Per_relative`        | `.+_Degree_[string]_Count_relative` / No. of notes of the given part/sound/family/score                                                                                                                                                   | The sum of [asc, desc, nat, dasc, ddesc] or [nat, nonat] sould be 1 in each aria                                           |
| `.+_DottedRhythm`                  | `no.` of beats with dotted rhyhm in a given part/sound/family/score / (SoundingMeasures * no. of beats of the `TimeSig`) in the part/sound/family/part                                                                                    | when not blank, 0-1                                                                                                        |
| `.+_DoubleDottedRythm`             | no. of beats with doubly dotted rhyhm in a given part/sound/family/score / (SoundingMeasures * no. of beats of the $TimeSig) in the part/sound/family/part                                                                                | when not blank, 0-1                                                                                                        |
| `.+_DynAbruptness`                 | sum of absolute values of(((Dynamic marking 2 - dynamic marking 1) / no. of beats for dyn marking 1) divided into the no. of total beats in the score/sound/family/part                                                                   | when not blank, 0-n                                                                                                        |
| `.+_DynGrad`                       | Sum of absolute values of ((Dynamic marking 2 - dynamic marking 1) / no. of beats for dyn marking 1) divided into the no. of dynamic markings - 1 in the score/sound/family/part                                                          | when not blank, 0-n                                                                                                        |
| `.+_DynMean`                       | Sum of all the dynamic values of that part/sound/family/score / no. of dynamic indications in the score/sound/family/part                                                                                                                 | when not blank, 0-n                                                                                                        |
| `.+_DynMean_weighted`              | Sum of dynamic value * no. of beats in which it is present / (`.+_SoundingMeasures` * no. of beats of the TimeSig) in the score/sound/family/part                                                                                         | when not blank, 0-n                                                                                                        |
| `.+_HighestNoteIndex`              | MIDI index for the highest note in the given score/family/sound/part                                                                                                                                                                      | when not blank, 0-n                                                                                                        |
| `.+_LowestNoteIndex`               | MIDI index for the lowest note in the given score/family/sound/part                                                                                                                                                                       | when not blank, 0-n                                                                                                        |
| `.+_Interval.+_Count`              | No. of `.+` intervals in a given score/family/sound/part                                                                                                                                                                                  | when not blank, 0-n                                                                                                        |
| `.+_Interval.+_Per`                | `.+_Interval.+_Count` / (No. of notes in a given score/family/sound/part - 1)                                                                                                                                                             | when not blank, 0-1; the sum in each aria = 1                                                                              |
| `.+_Intervals.+Asc_Count`          | No. of ascending intervals of a `.+` type in a given part/sound/family/score                                                                                                                                                              | when not blank, 0-n                                                                                                        |
| `.+_Intervals.+Asc_Per`            | `.+_Intervals.+Asc_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                         | when not blank, 0-1                                                                                                        |
| `.+_Intervals.+Desc_Count`         | No. of descending intervals of a `.+` type in a given part/sound/family/score                                                                                                                                                             | when not blank, 0-n                                                                                                        |
| `.+_Intervals.+Desc_Per`           | `.+_Intervals.+Desc_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                        | when not blank, 0-1                                                                                                        |
| `.+_Intervals.+All_Count`          | No. of intervals of a `.+` type in a given part/sound/family/score                                                                                                                                                                        | when not blank, 0-n                                                                                                        |
| `.+_Intervals.+All_Per`            | `.+_Intervals.+All_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                         | when not blank, 0-1                                                                                                        |
| `.+_StepwiseMotion.+_Count`        | No. of intervals of [asc, desc, all] stepwise intervals in a given part/sound/family/score                                                                                                                                                | when not blank, 0-n                                                                                                        |
| `.+_StepwiseMotion.+_Per`          | `.+_StepwiseMotion.+_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                       | when not blank, 0-1                                                                                                        |
| `.+_Leaps.+_Count`                 | No. of [asc, desc, all] leaps in a given part/sound/family/score                                                                                                                                                                          | when not blank, 0-n                                                                                                        |
| `.+_Leaps.+_Per`                   | `.+_Leaps.+_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                                | when not blank, 0-1                                                                                                        |
| `.+_RepeatedNotes_Count`           | No. of repeated notes in a given part/sound/family/score                                                                                                                                                                                  | when not blank, 0-n                                                                                                        |
| `.+_RepeatedNotes_Per`             | `.+_RepeatedNotes_Count` / (no. of notes - 1) in a given part/sound/family/score                                                                                                                                                          | when not blank, 0-1                                                                                                        |
| `.+_LargestAbsoluteSemitones.+`    | Largest [asc, desc, all] interval in the part/sound/family/score, in number of semitones, disregarding the direction                                                                                                                      | when not blank, 0-n                                                                                                        |
| `.+_LargestSemitones.+`            | Largest [asc, desc, all] interval in the part/sound/family/score, in number of semitones, taking into account the direction                                                                                                               | when not blank, 0-n                                                                                                        |
| `.+_MeanInterval`                  | Mean interval of the part/sound/family/score, given as interval name                                                                                                                                                                      | string                                                                                                                     |
| `.+_RhythmInt`                     | Sum of the duration of the notes / (`.+_SoundingMeasures` * no. of beats of the TimeSignature)                                                                                                                                            | when not blank, 0-n                                                                                                        |
| `Score_VoiceReg`                   | Mean of (MIDI Index of the note - MIDI index of the last note in the vocal part)                                                                                                                                                          | never blank in Didone corpus                                                                                               |
| `.+_SyllabicRatio`                 | Mean of (no. of notes / no. of syllables) in each vocal part                                                                                                                                                                              | 0-1                                                                                                                        |
| `SoundVoice_VoicePresence`         | `SoundVoice_SoundingMeasures` / `Measures`                                                                                                                                                                                                | 0-1                                                                                                                        |
| `Presence_of_.+`                   | Inclusion of a given part on the score                                                                                                                                                                                                    | 0 or 1                                                                                                                     |
| `Part.+_Part.+__Texture`           | No. of notes Part[1] / No. of notes Part[2]                                                                                                                                                                                               | 0-n                                                                                                                        |
